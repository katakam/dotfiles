#!/bin/sh

FILE=$(mktemp --suffix=vim-anywhere.txt)
function finish {
  rm $FILE
}
trap finish EXIT

WINDOW=$(xdotool getwindowfocus)
xdotool key ctrl+a
xclip -o > $FILE
termite -e "nvim -c 'set tw=0 | set spell' '$FILE'"

if [ $? -eq 0 ]; then
  cat $FILE | xclip -sel clipboard
  xdotool windowfocus --sync $WINDOW
  xdotool key ctrl+a ctrl+v
fi
